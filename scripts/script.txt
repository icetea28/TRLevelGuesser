<script>
        //EVERYTHING RELATED TO LEVELS - EDIT WHEN CHANGING PICTURES OR ADDING OR REMOVING
            //RAW IMAGE FILES DIRECTORY
                var imageFileNames = []; // enter file name with the file type e.g. pictures/egg.jpg
            //CLUES FOR IMAGES
                function getClueForImage(imageSrc) {
                    var clueMap = {
                        };
                    // Extract the filename from the imageSrc
                    var filename = imageSrc.split('/').pop();
                    return clueMap[filename] || "No clue available for this image. I must have forgotten it FeelsBadMan";
                    }
            //CORRECT ANSWER FOR EACH LEVEL 
                function checkAnswers() {
                    // Clear the wrongAnswers object before checking answers
                    wrongAnswers = {};
            
                    var correctAnswers = {
                    // more pictures added same way, picture name with file type in first "", expected answer in second "",
                    };

                    var totalCorrect = 0;

                    var totalCorrect = 0;

                    var riddles = document.getElementsByClassName("riddle");
                    for (var i = 0; i < riddles.length; i++) {
                        var image = riddles[i].querySelector("img");
                        var input = riddles[i].querySelector("input");
                        var imageName = image.getAttribute("src");
                        var playerAnswer = input.value.toLowerCase();

                        // If input is not empty or just spaces
                        if (playerAnswer.trim() === "") {
                            playerAnswer = "Blank";
                            }

                        if (correctAnswers[imageName]) {
                            var correctAnswer = correctAnswers[imageName];

                            // check for mistake
                            if (isCloseEnough(playerAnswer, correctAnswer)) {
                                totalCorrect++;
                                input.classList.add("correct-answer"); // Füge die CSS-Klasse hinzu
                            } else {
                                wrongAnswers[playerAnswer] = correctAnswer;
                                input.classList.add("wrong-answer"); // Füge die CSS-Klasse hinzu
                            }
                        }
                    }
                    var totalCorrectRatio = totalCorrect / numberOfSelectedImages; // Verwende die neue Variable
                    var resultMessage = "<font size=5><b><font color=#01DF01>Total Correct Answers: " + totalCorrect + "/" + numberOfSelectedImages + "</font color></font size></b>";
                    if (Object.keys(wrongAnswers).length > 0) {
                        resultMessage += "<p></p><br><font size=5><b><font color=#FF0000>Your mistakes:</font color></font size></b>";
                        for (var playerAnswer in wrongAnswers) {
                            resultMessage += "<br>" + playerAnswer;
                        }
                    }

                    document.getElementById("result").innerHTML = resultMessage;
                }
                

        var selectedImages = [];
        
        var selectedImageIndices = [];
        while (selectedImageIndices.length < 10) {
            var randomIndex = Math.floor(Math.random() * imageFileNames.length);
            if (!selectedImageIndices.includes(randomIndex)) {
                selectedImageIndices.push(randomIndex);
            }
        }
        var selectedImages = selectedImageIndices.map(function(index) {
            return imageFileNames[index];
        });
        var riddlesContainer = document.getElementById("riddles-container");
        for (var i = 0; i < selectedImages.length; i++) {
            var riddleDiv = document.createElement("div");
            riddleDiv.classList.add("riddle");
    
            var img = document.createElement("img");
            img.src = selectedImages[i];
            img.alt = "Picture " + (i + 1);
    
            var input = document.createElement("input");
            input.type = "text";
            input.style = "width: 300px; height: 40px";
            input.placeholder = "Enter Room number:";
    
            var clueButton = document.createElement("button");
            clueButton.textContent = "Get a Clue";
            clueButton.classList.add("clue-button");

            // Use a closure to capture the current value of 'i'
            (function(index) {
                clueButton.addEventListener("click", function(event) {
                    var clue = getClueForImage(selectedImages[index]);
                    alert(clue);
                });
            })(i);

            riddleDiv.appendChild(img);
            riddleDiv.appendChild(input);
            riddleDiv.appendChild(clueButton);

            riddlesContainer.appendChild(riddleDiv);
            riddlesContainer.appendChild(document.createElement("br"));
        }
        
        var wrongAnswers = {}; // declare outside functions
        
        function updateButtonText() {
            var buttonText = "Change amount of pictures (" + numberOfSelectedImages + ")";
            var button = document.getElementById("change-amount-button");
            button.textContent = buttonText;
        }

        function fillWrongAnswers() {
            var riddles = document.getElementsByClassName("riddle");
            for (var i = 0; i < riddles.length; i++) {
                var input = riddles[i].querySelector("input");
                var playerAnswer = input.value.toLowerCase();

                if (playerAnswer in wrongAnswers) {
                    input.value = wrongAnswers[playerAnswer];
                    input.classList.remove("wrong-answer"); // Entferne die CSS-Klasse
                } else {
                    input.classList.remove("correct-answer"); // Entferne die CSS-Klasse
                }
            }
        }
        
        // check if there's a mistake and how close it has to be
        function isCloseEnough(str1, str2) {
            var maxErrors = 2; // amount of max possible mistakes
            var errors = 0;
            
            for (var i = 0; i < Math.min(str1.length, str2.length); i++) {
                if (str1[i] !== str2[i]) {
                    errors++;
                    if (errors > maxErrors) {
                        return false;
                    }
                }
            }
            
            // in case of different length of strings
            errors += Math.abs(str1.length - str2.length);
            
            return errors <= maxErrors;
        }
        
        var numberOfSelectedImages = 10;

        function startGame() {
            numberOfSelectedImages = parseInt(prompt("Enter the number of images you want to guess (up to 10):"));

            if (isNaN(numberOfSelectedImages) || numberOfSelectedImages <= 0 || numberOfSelectedImages > 10) {
                alert("Please enter a valid number between 1 and 10.");
                return;
                }

            updateButtonText();

            var selectedImageIndices = [];
            while (selectedImageIndices.length < numberOfSelectedImages) {
                var randomIndex = Math.floor(Math.random() * imageFileNames.length);
                if (!selectedImageIndices.includes(randomIndex)) {
                    selectedImageIndices.push(randomIndex);
                }
            }

            // Clear the riddles container before adding new images
            var riddlesContainer = document.getElementById("riddles-container");
            riddlesContainer.innerHTML = "";

            // Load images dynamically
            selectedImageIndices.forEach(function(index) {
                var riddleDiv = document.createElement("div");
                riddleDiv.classList.add("riddle");

                var img = document.createElement("img");
                img.src = imageFileNames[index];
                img.alt = "Picture " + (index + 1);

                var input = document.createElement("input");
                input.type = "text";
                input.style = "width: 300px; height: 40px";
                input.placeholder = "Enter Room number:";

                riddleDiv.appendChild(img);
                riddleDiv.appendChild(input);

                riddlesContainer.appendChild(riddleDiv);
                riddlesContainer.appendChild(document.createElement("br"));
            });

            // Reset result message
            document.getElementById("result").innerHTML = "";
        }
    </script>